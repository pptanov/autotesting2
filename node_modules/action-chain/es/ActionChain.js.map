{"version":3,"file":"ActionChain.js","sourceRoot":"","sources":["../src/ActionChain.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,YAAY,EAAE,MAAM,OAAO,CAAA;AACpC,OAAO,EAAE,cAAc,EAAE,MAAM,SAAS,CAAA;AAGxC,IAAM,cAAc,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,CAAA;AAE5D;IAA4D,uCAE3D;IACC,qBACU,OAAgB,EAChB,OAA+C;QAA/C,wBAAA,EAAA,YAA+C;QAFzD,YAIE,iBAAO,SACR;QAJS,aAAO,GAAP,OAAO,CAAS;QAChB,aAAO,GAAP,OAAO,CAAwC;;IAGzD,CAAC;IAED,gCAAU,GAAV,UAAW,aAAwB;QAAnC,iBAUC;QATC,IAAI,cAAc,EAAE;YAClB,OAAO,cAAc,CACnB,IAAI,CAAC,OAAO,EACZ,IAAI,CAAC,OAAO,CAAC,kBAAkB,EAC/B,UAAC,MAAM,IAAK,OAAA,KAAI,CAAC,SAAS,CAAC,QAAQ,uBAAO,aAAa,EAAK,MAAM,EAAG,EAAzD,CAAyD,CACtE,CAAA;SACF;QAED,OAAO,IAAI,CAAC,OAAO,CAAA;IACrB,CAAC;IACH,kBAAC;AAAD,CAAC,AArBD,CAA4D,YAAY,GAqBvE","sourcesContent":["import { EventEmitter } from 'betsy'\nimport { proxifyEffects } from './utils'\nimport { ActionChainEvents, Execution } from './types'\n\nconst IS_DEVELOPMENT = process.env.NODE_ENV !== 'production'\n\nexport class ActionChain<Effects, ExtraEvents = {}> extends EventEmitter<\n  ActionChainEvents & ExtraEvents\n> {\n  constructor(\n    private effects: Effects,\n    private options: { providerExceptions?: string[] } = {}\n  ) {\n    super()\n  }\n\n  getEffects(thisExecution: Execution) {\n    if (IS_DEVELOPMENT) {\n      return proxifyEffects(\n        this.effects,\n        this.options.providerExceptions,\n        (effect) => this.emitAsync('effect', { ...thisExecution, ...effect })\n      )\n    }\n\n    return this.effects\n  }\n}\n"]}